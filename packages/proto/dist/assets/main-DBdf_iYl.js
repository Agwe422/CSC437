import"./darkmode-Du2TWbuW.js";const u=(()=>{const s="0d5b4043cc934147973074e15d1f2b0c",t="33d4b6a5c112493290b38c127329251c";async function n(){return(await(await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(`${s}:${t}`)},body:"grant_type=client_credentials"})).json()).access_token}async function o(a){return(await(await fetch("https://api.spotify.com/v1/browse/categories?locale=sv_US",{headers:{Authorization:`Bearer ${a}`}})).json()).categories.items}async function e(a,r){return(await(await fetch(`https://api.spotify.com/v1/browse/categories/${r}/playlists?limit=10`,{headers:{Authorization:`Bearer ${a}`}})).json()).playlists.items}async function i(a,r){return(await(await fetch(`${r}?limit=10`,{headers:{Authorization:`Bearer ${a}`}})).json()).items}async function c(a,r){return await(await fetch(r,{headers:{Authorization:`Bearer ${a}`}})).json()}return{getToken:n,getGenres:o,getPlaylists:e,getTracks:i,getTrack:c}})(),g=(()=>{const s={selectGenre:"#select_genre",selectPlaylist:"#select_playlist",btnSearch:"#btn_submit",songList:".song-list",songDetail:"#song-detail",hiddenToken:"#hidden_token"};return{getElements(){return{genre:document.querySelector(s.selectGenre),playlist:document.querySelector(s.selectPlaylist),search:document.querySelector(s.btnSearch),list:document.querySelector(s.songList),detail:document.querySelector(s.songDetail),token:document.querySelector(s.hiddenToken)}},fillGenres(t){const n=this.getElements().genre;t.forEach(o=>{const e=document.createElement("option");e.value=o.id,e.textContent=o.name,n.appendChild(e)})},fillPlaylists(t){const n=this.getElements().playlist;t.forEach(o=>{const e=document.createElement("option");e.value=o.tracks.href,e.textContent=o.name,n.appendChild(e)})},fillTracks(t){const n=this.getElements().list;n.innerHTML="",t.forEach(o=>{const e=document.createElement("a");e.href="#",e.id=o.track.id,e.textContent=o.track.name,e.className="list-group-item list-group-item-action list-group-item-light",n.appendChild(e)})},showTrackDetail(t){const n=this.getElements().detail;n.innerHTML=`
        <div class="row col-sm-12 px-0">
          <img src="${t.album.images[2].url}" alt="" class="track" />
        </div>
        <div class="row col-sm-12 px-0">
          <label class="form-label col-sm-12">${t.name}</label>
        </div>
        <div class="row col-sm-12 px-0">
          <label class="form-label col-sm-12">By ${t.artists[0].name}</label>
        </div>
      `},storeToken(t){this.getElements().token.value=t},getStoredToken(){return this.getElements().token.value}}})(),m=function(s,t){const n=t.getElements();async function o(){const e=await s.getToken();t.storeToken(e);const i=await s.getGenres(e);t.fillGenres(i)}return n.genre.addEventListener("change",async()=>{n.playlist.innerHTML="<option>Selectâ€¦</option>",n.list.innerHTML="",n.detail.innerHTML="";const e=t.getStoredToken(),i=await s.getPlaylists(e,n.genre.value);t.fillPlaylists(i)}),n.search.addEventListener("click",async e=>{e.preventDefault(),n.list.innerHTML="",n.detail.innerHTML="";const i=t.getStoredToken(),c=await s.getTracks(i,n.playlist.value);t.fillTracks(c)}),n.list.addEventListener("click",async e=>{e.preventDefault();const i=e.target,c=t.getStoredToken(),a=await s.getTrack(c,i.id);t.showTrackDetail(a)}),{init:o}}(u,g);window.addEventListener("DOMContentLoaded",()=>{m.init()});
